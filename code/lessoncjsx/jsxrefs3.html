<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refs</title>
    <script src="https://unpkg.com/react/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
  /*
  *
  *This doesn't work, even though the value of count increases on click. Why? React is oblivious to the change of local variables and, therefore, doesn't know when to update the DOM. We'd need to rerender the component, namely request React to call the component function Counter, to let the change reflected on the screen.
  * 
  */
  function Counter() {
      /* 1. Get a "variable" that corresponds to the CURRENT INSTANCE of the component */
      const count = React.useRef(0);
   // let count = 0
     console.log('render ' + count.current )
    return (
      <div className="flex flex-col justify-center items-center m-8">
         {/* 3. Use the value stored inside the "variable" */}
        <div>  {count.current}    </div>
        <button
          className="bg-purple-700 px-6 text-white rounded-md hover:bg-purple-500"
          onClick={() => {
            //count++
            count.current=count.current+1
            console.log('After set '+ count.current)
          }}
        >
          +1
        </button>
      </div>
    )
  }
  const element = (
    <div className="container">
        <Counter />
        <Counter />
    </div>

  )
 // ReactDOM.render ( element, document.getElementById('root'))
/*
*  useRef doesn't trigger a rerender when the value is updated
* In fact, being able to persist a value across rerenders without triggering another rerender is exactly why useRef is created. 
Sometimes we just don't want the component to rerender when the value is updated.
*/
const root_element = document.getElementById('root');
  const root = ReactDOM.createRoot(root_element);
        root.render(element);
</script>
</body>
</html>